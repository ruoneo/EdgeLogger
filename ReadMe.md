### Data upload
topic:  device/power/up/{device_id}
```json
{
  "msgType": "up",
  "msgId": "d0e64213-eb6b-4ed6-ab92-252cfcf16494",
  "msgCreateTime": "20250619145825105",
  "source": {
    "ipAddress": null,
    "gatewayId": "3-3-JC-1F-中控室"
  },
  "batch": [
    {
      "timestamp": "20250619145824881",
      "device_type": "three_phase_meter",
      "device_id": "AHU34",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 3274.53,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824893",
      "device_type": "three_phase_meter",
      "device_id": "1#除湿机",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 178027.27,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824903",
      "device_type": "three_phase_meter",
      "device_id": "2#除湿机",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 254257.36,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824915",
      "device_type": "three_phase_meter",
      "device_id": "3#除湿机",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 318374.28,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824925",
      "device_type": "three_phase_meter",
      "device_id": "1#CSJ二级柜",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 1778571.4,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824937",
      "device_type": "three_phase_meter",
      "device_id": "4#除湿机",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 7319.23,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824950",
      "device_type": "three_phase_meter",
      "device_id": "AHU35",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 36687.34,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824960",
      "device_type": "three_phase_meter",
      "device_id": "5#除湿机",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 6787.42,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145824980",
      "device_type": "three_phase_meter",
      "device_id": "AHU37",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 5012.59,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    },
    {
      "timestamp": "20250619145825004",
      "device_type": "three_phase_meter",
      "device_id": "1APZ",
      "metrics": {
        "voltage": {
          "data_type": "float",
          "unit": "V",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0,
            "line_ab": 0,
            "line_bc": 0,
            "line_ca": 0
          }
        },
        "current": {
          "data_type": "float",
          "unit": "A",
          "value": {
            "phase_a": 0,
            "phase_b": 0,
            "phase_c": 0
          }
        },
        "power": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvar",
            "value": {
              "phase_a": 0,
              "phase_b": 0,
              "phase_c": 0,
              "total": 0
            }
          },
          "apparent": {
            "data_type": "float",
            "unit": "kVA",
            "value": {
              "total": 0
            }
          }
        },
        "system": [
          {
            "data_type": "float",
            "unit": "",
            "power_factor": 0
          },
          {
            "data_type": "float",
            "unit": "Hz",
            "frequency": 0
          }
        ],
        "energy": {
          "active": {
            "data_type": "float",
            "unit": "kW",
            "value": {
              "forward": 1233492.9,
              "reverse": 0
            }
          },
          "reactive": {
            "data_type": "float",
            "unit": "kvarh",
            "value": {
              "forward": 0,
              "reverse": 0
            }
          }
        }
      },
      "status": {
        "device_status": 0,
        "data_quality": 100
      }
    }
  ]
}
```
### Data downlink
Topic: device/power/down/{device_id}
```json
{
  "msgType": "down",
  "msgId": "{UUID v4}",
  "source": {
    // 指令来源
    "source_id": "GW-EM-01",
    // 发起系统
    "operator": "6789555",
    // 操作员ID
    "name": "xxxx",
    // 操作者
    "auth_token": "Bearer xyz"
    // 认证令牌
  },
  "batch": [
    {
      "transaction_id": "CMD-20240815-001",
      // 唯一指令标识
      "timestamp": "1710000000123",
      // 毫秒级时间戳

      "target": {
        // 目标设备
        "gateway_id": "GW-01",
        // 网关标识
        "device_type": "S7-1200",
        // 设备类型
        "device_id": "PLC-01"
        // 设备唯一ID
      },
      "operation": {
        // 操作定义
        "key": "A启",
        //KEY
        "value": "1",
        //value
        "type": "write_register",
        // 操作类型
        "address": "D100",
        // 寄存器地址
        "data_type": "float32",
        // 数据类型
        "verify": true
        // 要求回读验证
      },
      "control_params": {
        // 控制参数
        "priority": 1,
        // 优先级(0-9,0优先级最高，9优先级最低)
        "timeout": 5000,
        // 超时时间(ms)
        "retry_policy": {
          // 重试策略
          "max_attempts": 3,
          "interval": 1000
        }
      }
    },
    {
      "transaction_id": "CMD-20240815-001",
      // 唯一指令标识
      "timestamp": 1710000000123,
      // 毫秒级时间戳

      "target": {
        // 目标设备
        "gateway_id": "GW-01",
        // 网关标识
        "device_type": "S7-1200",
        // 设备类型
        "device_id": "PLC-01"
        // 设备唯一ID
      },
      "operation": {
        // 操作定义
        "key": "A启",
        //KEY
        "value": "1",
        //value
        "type": "write_register",
        // 操作类型
        "address": "D100",
        // 寄存器地址
        "data_type": "float32",
        // 数据类型
        "verify": true
        // 要求回读验证
      },
      "control_params": {
        // 控制参数
        "priority": 1,
        // 优先级(0-9,0优先级最高，9优先级最低)
        "timeout": 5000,
        // 超时时间(ms)
        "retry_policy": {
          // 重试策略
          "max_attempts": 3,
          "interval": 1000
        }
      }
    }
  ]
}
```

